# Тестовый веб-сервис web-сервис по закачке/скачке данных.

## Общие соображения по дизайну
- Спецификация не указывает на дальнейшее развитие проекта, нет требований по дальнейшему расширению и/или интеграции с другими системами - такие возможности можно не закладывать. 
- Ограничения на модификацию схемы БД не оговорены, и есть запрос на её доработку. Исходим из того, что дополнять схему БД можно без ограничений.
- Реализовавать поддержку HTTPS на экземпляре микросервиса нерационально, она будет вынесена на балансировщик. Требование непременно иметь этот функционал именно в микросервисе не оговорено.
- Хранением контена и генерацией токенов заведует одна и та же БД. Логично будет аутентификацию токенов возложить на неё же, что уменьшит объёмы разработки и отладки "с нуля". Так будет и быстрее, и производительней, и надёжнее.
- Требования к тестированию не оговорены. Поэтому реализованы простейшие функциональные "приёмочные" тесты, без моков и фреймворков, покрывающие, однако, весь функционал, заданный спецификацией.
- Для задач тестирования будут применяться самоподписанные сертификаты, что потребует отключения проверки сертификатов на валидность при выполнении запросов.
- Для облегчения тестирования балансировщик (haproxy) предоставляет доступ напрямую к контейнеру микросервиса на порту 8080 по протоколу HTTP, HTTPS на порту 443 и редирект на HTTPS на порту 80. Сохранение заголовков при редиректе лежит на клиенте.

## Использование
Проект расчитан на ОС семейства Linux, тестировался в Debian 12 "Bookworm". В корневом каталоге проекта имеется файл **start.sh**, при запуске которого произойдёт сборка проекта, запуск среды для тестирования и выполнение пакета тестов. Код выхода скрипта **start.sh** соответствует количеству проваленных тестов, если код **"0"**, значит все тесты прошли успешно.

По окончании работы скрипт останавливает тестовую среду и удаляет её, вместе с созданным для хранения данных томом. При необходимости продолжить работу с тестовой средой, достаточно закомментировать в скрипте строку *docker compose down --volumes*.

## Необходимые иснструменты
Помимо собственно Go, для тестирования требуются:
- bash
- jq (для парсинга ответов сервера)
- curl
- docker
- docker compose 2
